<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Oil Leak Home Insurance Claim Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Load Poppins from Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
    rel="stylesheet"
  />

  <!-- jsPDF (for PDF generation) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    /* RESET & BASE STYLES */
    * {
      box-sizing: border-box;
      margin: 0; 
      padding: 0;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: #f4f7fa;
      color: #333;
      line-height: 1.5;
      padding: 0 15px 40px;
    }
    a {
      text-decoration: none;
    }
    h1, h2, h3, h4, h5 {
      font-weight: 600;
      margin-bottom: 10px;
    }

    /* TOP HEADER / PAGE INTRO */
    .page-intro {
      max-width: 1000px;
      margin: 0 auto 25px;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    }
    .page-intro h1 {
      font-size: 1.5rem;
      margin-bottom: 15px;
    }
    .page-intro p {
      margin-bottom: 10px;
      color: #555;
    }

    /* CALCULATOR WRAPPER */
    .calculator-wrapper {
      max-width: 1000px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap; /* stack on mobile */
      background: #fff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
      border-radius: 8px;
      overflow: hidden;
    }

    /* LEFT COL */
    .left-col, .right-col {
      flex: 1 1 50%;
      min-width: 300px;
      padding: 30px;
    }
    .left-col {
      background: #fdfdfd;
      border-right: 1px solid #e6e6e6;
    }

    /* HEADINGS INSIDE LEFT COL */
    .left-col h2 {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #333;
    }

    /* LABELS & INPUTS */
    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: 600;
      font-size: 0.95rem;
      color: #444;
    }
    select, input[type="number"] {
      width: 100%;
      padding: 10px;
      font-size: 0.95rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: inherit;
      margin-bottom: 10px;
    }
    .description {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 15px;
      line-height: 1.4;
    }

    /* RADIO GROUP */
    .radio-group {
      margin-bottom: 20px;
    }
    .radio-option {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      cursor: pointer;
    }
    .radio-option input {
      margin-right: 8px;
    }

    /* RIGHT COL */
    .right-col h2 {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #333;
    }

    /* SUMMARY TABLE */
    .summary-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    .summary-table thead {
      background: #f2f2f2;
    }
    .summary-table th,
    .summary-table td {
      padding: 8px;
      border-bottom: 1px solid #eee;
      font-size: 0.95rem;
    }
    .summary-table th {
      text-align: left;
      color: #333;
    }
    .summary-table td {
      color: #444;
    }

    /* DOWNLOAD BUTTON */
    .download-btn {
      display: inline-block;
      padding: 12px 18px;
      margin-top: 20px;
      background: #00b163;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .download-btn:hover {
      background: #009a55;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .left-col, .right-col {
        flex: 1 1 100%;
        border-right: none;
        border-bottom: 1px solid #ddd;
      }
      .right-col {
        border-bottom: none;
      }
    }
  </style>
</head>
<body>

  <!-- PAGE INTRO / CONTEXT -->
  <div class="page-intro">
    <h1>Oil Leak Home Insurance Claim Calculator</h1>
    <p><strong>Oil Leak And Underinsured?</strong><br/>
       Your Home Insurance Coverage Affects Oil Leak Costs.
       If your home is not fully insured, you'll have to cover some of the cost of Oil Leak remediations.
    </p>
    <p>At an industry standard rate of €220 per sq. foot, the costs can add up. Use our handy Oil Leak Insurance calculator below to estimate your coverage and costs.</p>
    <p>Our team is here to assist you every step of the way. If you have questions regarding home insurance coverage and costs, contact us immediately for a consultation.</p>
    <p><strong>The Hidden Risk for Irish Homeowners Facing Oil Leaks</strong><br/>
       Most homeowners do not realize they are underinsured until they need to make a claim. By then, it is too late. This issue becomes even more serious when dealing with costly damages such as oil leaks from home heating tanks.
    </p>
    <p><strong>Why Are So Many Irish Homes Underinsured?</strong><br/>
       1. Rising Construction Costs<br/>
       2. Market Value vs. Rebuild Cost<br/>
       3. Lack of Policy Updates<br/>
       4. Underinsurance Penalties
    </p>
    <p><strong>The Risk of Oil Leaks</strong><br/>
       One of the most expensive claims for homeowners in Ireland is a kerosene oil leak. Soil contamination, structural damage, water supply pollution, and environmental clean-ups can cost tens of thousands of euros.
    </p>
    <p><strong>How to Check If You Are Underinsured</strong><br/>
       1. Calculate Your Rebuild Cost<br/>
       2. Review Your Insurance Policy<br/>
       3. Check Your Oil Tank Cover<br/>
       4. Inspect Your Oil Tank
    </p>
    <p>Check your home insurance policy today and ensure you are fully covered before it is too late. If you are experiencing an oil leak and don't have full coverage, contact us to discuss your options.</p>
  </div>

  <!-- CALCULATOR WRAPPER -->
  <div class="calculator-wrapper">
    <!-- LEFT COLUMN (INPUTS) -->
    <div class="left-col">
      <h2>Rebuilding Costs for Insurance Purposes (2024/2025)</h2>

      <!-- House Type -->
      <label for="houseType">House type</label>
      <select id="houseType">
        <option value="-1">Select value</option>
        <option value="0">Terraced; 2 bedrooms (typical size 78 sq. m)</option>
        <option value="1">Terraced; 3 bedrooms (typical size 98 sq. m)</option>
        <option value="2">Semi-detached; 3 bedrooms (typical size 98 sq. m)</option>
        <option value="3">Semi-detached; 4 bedrooms (typical size 115 sq. m)</option>
        <option value="4">Detached; 4 bedrooms (typical size 113 sq. m)</option>
        <option value="5">Detached Bungalow; 4 bedrooms (typical size 137 sq. m)</option>
      </select>
      <div class="description">
        The rebuilding rates are for speculatively built homes i.e. estate-type homes and should not be used for other house styles such as one-off homes in the countryside or period properties.
      </div>

      <!-- Gross internal floor area -->
      <label for="floorArea">Gross internal floor area (sq. m.)</label>
      <input
        type="number"
        id="floorArea"
        value="100"
        min="1"
        max="10000"
      />
      <div class="description">
        Calculate the internal area of your property by measuring the internal finish of the perimeter or party walls within the property, ignoring skirting boards, at each floor level. 
        For multi-storey houses, if floors differ, calculate each storey and sum them.
      </div>

      <!-- Separate Garage -->
      <div class="radio-group">
        <label>Separate Garage</label>
        <div class="description">
          If your garage is part of the house, ensure it is included in the area above.
        </div>
        <label class="radio-option">
          <input type="radio" name="garage" value="0" checked />
          No Garage
        </label>
        <label class="radio-option">
          <input type="radio" name="garage" value="22880" />
          Single Car Garage
        </label>
        <label class="radio-option">
          <input type="radio" name="garage" value="40928" />
          Double Car Garage
        </label>
      </div>

      <!-- Add For Higher Than Average -->
      <label for="higherAverage">Add For Higher Than Average</label>
      <input
        type="number"
        id="higherAverage"
        value="0"
        min="0"
        max="1000000"
      />
      <div class="description">
        Costs are based on an average fit out. If you have a 'Higher Than Average' fit out (e.g. premium kitchen, hardwood floors), add the additional amount here.
      </div>

      <!-- Additional Externals -->
      <label for="externals">Additional Externals</label>
      <input
        type="number"
        id="externals"
        value="0"
        min="0"
        max="1000000"
      />
      <div class="description">
        For any outbuildings, walls, or similar. Figures do allow for a path, driveway, re-grassing, and fencing. 
      </div>
    </div>

    <!-- RIGHT COLUMN (SUMMARY) -->
    <div class="right-col">
      <h2>Total Summary</h2>
      <table class="summary-table" id="summaryTable">
        <thead>
          <tr>
            <th style="width:60%">Name</th>
            <th style="width:40%">Total</th>
          </tr>
        </thead>
        <tbody id="summaryBody">
          <!-- Populated by JavaScript -->
        </tbody>
      </table>

      <button class="download-btn" id="downloadPdfBtn">Download PDF</button>
    </div>
  </div>

<script>
  /*****************************************
   * HOUSE TYPE / COST DATA
   *****************************************/
  const houseTypeLabels = [
    "Terraced; 2 bedrooms (typical size 78 sq. m)",
    "Terraced; 3 bedrooms (typical size 98 sq. m)",
    "Semi-detached; 3 bedrooms (typical size 98 sq. m)",
    "Semi-detached; 4 bedrooms (typical size 115 sq. m)",
    "Detached; 4 bedrooms (typical size 113 sq. m)",
    "Detached Bungalow; 4 bedrooms (typical size 137 sq. m)"
  ];

  // regionRates[regionName][houseTypeIndex] = cost-per-sq.m
  const regionRates = {
    "Dublin Region":     [3190, 3010, 3190, 3020, 3300, 2860],
    "Cork Region":       [2845, 2680, 2860, 2720, 2980, 2690],
    "Galway Region":     [2833, 2629, 2750, 2610, 2814, 2580],
    "Waterford Region":  [2790, 2590, 2775, 2635, 2866, 2470],
    "Limerick Region":   [2740, 2547, 2733, 2591, 2800, 2465],
    "North West Region": [2633, 2432, 2528, 2428, 2639, 2368],
    "North East Region": [2865, 2640, 2770, 2690, 2840, 2520]
  };

  /*****************************************
   * DOM ELEMENTS
   *****************************************/
  const houseTypeEl   = document.getElementById("houseType");
  const floorAreaEl   = document.getElementById("floorArea");
  const garageRadios  = document.getElementsByName("garage");
  const higherAvgEl   = document.getElementById("higherAverage");
  const externalsEl   = document.getElementById("externals");
  const summaryBodyEl = document.getElementById("summaryBody");
  const downloadBtn   = document.getElementById("downloadPdfBtn");

  /*****************************************
   * CALCULATE & RENDER
   *****************************************/
  function calculateAndRender() {
    const houseTypeIndex = parseInt(houseTypeEl.value, 10);
    const floorArea      = parseFloat(floorAreaEl.value) || 0;
    const addHigher      = parseFloat(higherAvgEl.value) || 0;
    const addExternals   = parseFloat(externalsEl.value) || 0;

    let selectedGarageValue = 0;
    for (let i = 0; i < garageRadios.length; i++) {
      if (garageRadios[i].checked) {
        selectedGarageValue = parseFloat(garageRadios[i].value) || 0;
        break;
      }
    }

    summaryBodyEl.innerHTML = "";

    // House Type row
    let houseTypeLabel = "N/A";
    if (houseTypeIndex >= 0) {
      houseTypeLabel = houseTypeLabels[houseTypeIndex];
    }
    addRow("House Type", houseTypeLabel);

    // Floor area
    addRow("Gross internal floor area (sq. m.)", floorArea + " sq m");

    // Garage
    if (selectedGarageValue === 0) {
      addRow("No Garage", "€ 0");
    } else {
      const textGarage = (selectedGarageValue === 22880)
        ? "Single Car Garage"
        : "Double Car Garage";
      addRow(textGarage, "€ " + formatNumber(selectedGarageValue));
    }

    // Higher than average
    addRow("Add For Higher Than Average", "€ " + formatNumber(addHigher));

    // Additional externals
    addRow("Additional Externals", "€ " + formatNumber(addExternals));

    // If no valid house type, skip region costs
    if (houseTypeIndex < 0) return;

    // Calculate for each region
    for (const [regionName, costs] of Object.entries(regionRates)) {
      const rate = costs[houseTypeIndex]; 
      const regionTotal = (rate * floorArea) + selectedGarageValue + addHigher + addExternals;
      addRow(regionName, "€ " + formatNumber(regionTotal));
    }
  }

  function addRow(label, value) {
    const tr = document.createElement("tr");
    const tdLabel = document.createElement("td");
    const tdValue = document.createElement("td");
    tdLabel.textContent = label;
    tdValue.textContent = value;
    tr.appendChild(tdLabel);
    tr.appendChild(tdValue);
    summaryBodyEl.appendChild(tr);
  }

  function formatNumber(num) {
    return num.toLocaleString("en-IE", { minimumFractionDigits: 0 });
  }

  /*****************************************
   * PDF GENERATION
   *****************************************/
  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({ unit: "pt", format: "a4" });
    let yPos = 40;

    // 1) Insert Enviroleak logo
    //    We'll fetch the SVG as data, then embed. For cross-domain, we must handle CORS or base64.
    //    For simplicity, let's do a quick fetch + convert to base64. If blocked by CORS, consider hosting a local copy.
    const logoUrl = "https://www.enviroleak.ie/site/uploads/logo/logo.svg";

    try {
      const logoBase64 = await convertSvgToBase64(logoUrl);
      // Add image to PDF (scaling to ~120px wide)
      doc.addImage(logoBase64, "SVG", 40, yPos, 120, 40);
    } catch (e) {
      // fallback if there's a CORS block or error
    }
    yPos += 50;

    doc.setFont("helvetica", "bold");
    doc.setFontSize(14);
    doc.text("Oil Leak Home Insurance Claim Calculator", 40, yPos);
    yPos += 20;

    doc.setFontSize(11);
    doc.setFont("helvetica", "normal");
    doc.text("Summary of your coverage and potential costs:", 40, yPos);
    yPos += 25;

    // 2) Gather table data
    const rows = summaryBodyEl.querySelectorAll("tr");
    rows.forEach((tr) => {
      const cells = tr.querySelectorAll("td");
      if (cells.length === 2) {
        const label = cells[0].textContent.trim();
        const val   = cells[1].textContent.trim();
        doc.text(`${label}: ${val}`, 40, yPos);
        yPos += 15;
      }
    });
    yPos += 20;

    // 3) Insert Contact Info
    doc.setFont("helvetica", "bold");
    doc.text("Enviroleak Contact Info:", 40, yPos);
    yPos += 18;
    doc.setFont("helvetica", "normal");
    const contactLines = [
      "info@enviroleak.ie",
      "",
      "Dublin Office:",
      "13 Upper Baggot Street, 2nd Floor, Dublin 4, DO4W7K5",
      "(01) 539 4393",
      "",
      "Cork Office:",
      "88/90 Main St, Rathgoggan Middle, Charleville, Co. Cork, P56 HC86",
      "(063) 732 11",
      "",
      "Galway Office:",
      "Galway Technology Centre, Mervue Business Park, Galway, H91D932",
      "(091) 396443",
      "",
      "Carlow Office:",
      "Loughmartin Business Park, Bunclody Road, Tullow, Carlow, R93T6CD",
      "(059) 9100464",
      "",
      "Need help with an Oil Leak Insurance Claim? Contact us today!"
    ];
    contactLines.forEach(line => {
      doc.text(line, 40, yPos);
      yPos += 14;
    });

    // 4) Save
    doc.save("enviroleak_cost_report.pdf");
  }

  // Utility: Convert external SVG to base64 (may fail if CORS not allowed)
  async function convertSvgToBase64(url) {
    const res = await fetch(url);
    const text = await res.text();
    const svg64 = btoa(text);
    return "data:image/svg+xml;base64," + svg64;
  }

  /*****************************************
   * EVENT LISTENERS
   *****************************************/
  houseTypeEl.addEventListener("change", calculateAndRender);
  floorAreaEl.addEventListener("input", calculateAndRender);
  higherAvgEl.addEventListener("input", calculateAndRender);
  externalsEl.addEventListener("input", calculateAndRender);
  for (let i = 0; i < garageRadios.length; i++) {
    garageRadios[i].addEventListener("change", calculateAndRender);
  }
  downloadBtn.addEventListener("click", downloadPDF);

  // Initial calc
  window.addEventListener("DOMContentLoaded", calculateAndRender);
</script>
</body>
</html>
